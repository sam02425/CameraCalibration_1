Installation and Configuration Guide:
1. Introduction
   1.1. Purpose
   1.2. Prerequisites
   1.3. Supported Hardware Platforms
       - Raspberry Pi 4
       - NVIDIA Jetson Nano

2. Hardware Setup
   2.1. Raspberry Pi 4
       - Required Components
       - Assembly Instructions
       - Power Supply and Connectivity
   2.2. NVIDIA Jetson Nano
       - Required Components
       - Assembly Instructions
       - Power Supply and Connectivity
   2.3. Camera Setup
       - Connecting USB Cameras
       - Connecting CSI Cameras
       - Camera Placement and Mounting
   2.4. Load Cell Setup
       - Load Cell Wiring
       - Load Cell Mounting and Calibration

3. Software Installation
   3.1. Operating System Installation
       - Raspberry Pi OS
       - Ubuntu for Jetson Nano
   3.2. Dependency Installation
       - OpenCV
       - PyTorch
       - HX711 Library
       - Other Required Libraries
   3.3. Code Repository Setup
       - Cloning the Repository
       - Installing Python Dependencies

4. Configuration
   4.1. Camera Configuration
       - Configuring Camera IDs
       - Adjusting Camera Settings (Resolution, Frame Rate)
   4.2. Load Cell Configuration
       - Calibrating Load Cells
       - Adjusting Scaling Factors
   4.3. Network Configuration
       - Setting Static IP Address
       - Configuring Firewall Rules
   4.4. System Configuration
       - Modifying Configuration Files
       - Setting Environment Variables

5. Troubleshooting
   5.1. Common Installation Issues
       - Dependency Conflicts
       - Camera Detection Problems
       - Load Cell Calibration Errors
   5.2. Network Connectivity Issues
       - Firewall Blockages
       - IP Address Conflicts
   5.3. Performance Issues
       - CPU and Memory Usage
       - Camera Frame Rate and Latency
       - Load Cell Sampling Rate

6. Maintenance and Updates
   6.1. System Backups
       - Backing Up Configuration Files
       - Backing Up Data and Logs
   6.2. Updating Software Components
       - Updating Operating System
       - Updating Python Dependencies
       - Updating Code Repository
   6.3. Hardware Maintenance
       - Cleaning Camera Lenses
       - Inspecting Load Cell Connections
       - Replacing Faulty Components

7. Conclusion
   7.1. Summary
   7.2. Additional Resources

8. Appendices
   8.1. Installation Checklists
   8.2. Configuration File Templates
   8.3. Troubleshooting Flowcharts
   8.4. FAQ


1. Hardware Setup:
   1.1. Raspberry Pi 4:
        - Ensure you have a Raspberry Pi 4 with sufficient RAM (4GB or more recommended).
        - Connect the Raspberry Pi 4 to a stable power supply.
        - Attach a heat sink or cooling fan to prevent overheating.

   1.2. Cameras:
        - Connect the cameras to the Raspberry Pi 4 using the appropriate interfaces (USB or CSI).
        - For USB cameras, plug them into the available USB ports.
        - For CSI cameras, connect them to the CSI camera port using the flat ribbon cable.
        - Ensure the cameras are securely attached and properly aligned.

   1.3. Load Cells:
        - Connect the 4 HX711 load cells to the Raspberry Pi 4 using the appropriate wiring.
        - Follow the wiring diagram provided with the load cells or refer to the pin configuration in the code.
        - Ensure the connections are secure and the wires are properly insulated.
        - Mount the load cells securely to the shelf or weighing platform.

2. Software Installation:
   2.1. Operating System:
        - Install a compatible operating system on the Raspberry Pi 4 (e.g., Raspberry Pi OS).
        - Follow the official installation guide for the chosen operating system.

   2.2. Dependencies and Libraries:
        - Update the system packages:
          ```
          sudo apt update
          sudo apt upgrade
          ```
        - Install OpenCV:
          ```
          sudo apt install libopencv-dev python3-opencv
          ```
        - Install PyTorch:
          - Visit the official PyTorch website and select the appropriate version for your Raspberry Pi 4.
          - Follow the installation instructions provided on the website.
        - Install the HX711 library:
          ```
          pip3 install hx711
          ```

   2.3. Code Setup:
        - Clone or download the Shelf Checkout System code repository to the Raspberry Pi 4.
        - Navigate to the code directory.
        - Install the required Python dependencies:
          ```
          pip3 install -r requirements.txt
          ```

   2.4. YOLOv5 Model:
        - Download the pre-trained YOLOv5 model file (`.pt`) suitable for your object detection task.
        - Place the model file in the designated directory specified in the code.

3. Configuration:
   3.1. Camera Configuration:
        - Open the code file and locate the `camera_ids` variable.
        - Update the `camera_ids` list with the correct camera IDs based on your camera connections.

   3.2. Load Cell Configuration:
        - Calibrate the load cells using a known weight.
        - Adjust the scale factor in the `set_scale` method in the code based on the calibration results.

   3.3. Network Configuration:
        - Configure the network settings of the Raspberry Pi 4 based on your network environment.
        - Set a static IP address or use DHCP to assign an IP address automatically.
        - Update the firewall settings to allow incoming connections on the required ports (if applicable).

4. Troubleshooting:
   4.1. Camera Issues:
        - If cameras are not detected or frames are not captured, check the camera connections and ensure the correct camera IDs are used.
        - Verify that the cameras are compatible with the Raspberry Pi 4 and have the necessary drivers installed.

   4.2. Load Cell Issues:
        - If the load cells are not providing accurate weight measurements, recalibrate them using a known weight.
        - Check the wiring connections and ensure they are secure and properly connected.

   4.3. Dependency Issues:
        - If you encounter issues with missing dependencies or libraries, ensure that all the required packages are installed correctly.
        - Double-check the installation steps and verify that the versions of the dependencies are compatible with your system.

   4.4. Performance Issues:
        - If the system experiences slow performance or lagging, consider optimizing the code or reducing the number of connected cameras.
        - Ensure that the Raspberry Pi 4 has sufficient processing power and memory to handle the workload.
        - Monitor the system resource usage and optimize the configuration if necessary.

By following this installation and configuration guide, you should be able to set up the hardware components, install the necessary software dependencies, and configure the Shelf Checkout System on your Raspberry Pi 4. If you encounter any issues during the process, refer to the troubleshooting section or seek further assistance from the community or support channels.

Remember to regularly update the system and its dependencies to ensure optimal performance and security. Additionally, make sure to backup your configuration files and any important data to prevent loss in case of system failures or maintenance.